(function(t){function e(e){for(var n,o,i=e[0],c=e[1],u=e[2],p=0,f=[];p<i.length;p++)o=i[p],r[o]&&f.push(r[o][0]),r[o]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);l&&l(e);while(f.length)f.shift()();return s.push.apply(s,u||[]),a()}function a(){for(var t,e=0;e<s.length;e++){for(var a=s[e],n=!0,i=1;i<a.length;i++){var c=a[i];0!==r[c]&&(n=!1)}n&&(s.splice(e--,1),t=o(o.s=a[0]))}return t}var n={},r={app:0},s=[];function o(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=t,o.c=n,o.d=function(t,e,a){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)o.d(a,n,function(e){return t[e]}.bind(null,n));return a},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=e,i=i.slice();for(var u=0;u<i.length;u++)e(i[u]);var l=c;s.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"08f3":function(t,e,a){"use strict";var n=a("8570"),r=a.n(n);r.a},3896:function(t,e,a){"use strict";var n=a("fc34"),r=a.n(n);r.a},"39f2":function(t,e,a){},"56d7":function(t,e,a){"use strict";a.r(e);a("cadf"),a("551c"),a("097d");var n=a("2b0e"),r=a("8c4f"),s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("div",{staticClass:"container"},[n("router-link",{staticClass:"logo",attrs:{to:"/"}},[n("img",{attrs:{alt:"Fitness stats logo",src:a("f228")}})]),n("router-view")],1)])},o=[],i={name:"app"},c=i,u=(a("5c0b"),a("2877")),l=Object(u["a"])(c,s,o,!1,null,null,null);l.options.__file="App.vue";var p=l.exports,f=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"login"},[a("h1",{staticClass:"title"},[t._v("Login to access your fitness data")]),a("button",{staticClass:"button is-medium is-primary",on:{click:t.login}},[t._v("Login using google")])])},d=[],v=(a("96cf"),a("1da1")),h=(a("ac6a"),a("456d"),a("bc3a")),g=a.n(h),m="292580249990-jekc2juf4mt3gq54u84im245mc2iqjfq.apps.googleusercontent.com",w="https://accounts.google.com/o/oauth2/v2/auth",b="https://www.googleapis.com/oauth2/v3/tokeninfo",_="https://www.googleapis.com/auth/fitness.activity.read",y="https://www.googleapis.com/auth/fitness.body.read",S="https://www.googleapis.com/auth/fitness.location.read";function k(t){return Object.keys(t).map(function(e){return"".concat(encodeURIComponent(e),"=").concat(encodeURIComponent(t[e]))}).join("&")}var D={login:function(){var t={client_id:m,redirect_uri:"".concat(window.location.origin,"/authenticated"),response_type:"token",scope:"".concat(_," ").concat(y," ").concat(S),include_granted_scopes:"true",state:"pass-through-value"};window.location.href="".concat(w,"?").concat(k(t))},validateAccessToken:function(){var t=Object(v["a"])(regeneratorRuntime.mark(function t(e){var a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,g.a.request({method:"post",url:b,params:{access_token:e}});case 3:return a=t.sent,t.abrupt("return",200===a.status);case 7:return t.prev=7,t.t0=t["catch"](0),t.abrupt("return",!1);case 10:case"end":return t.stop()}},t,this,[[0,7]])}));return function(e){return t.apply(this,arguments)}}(),getDataSources:function(){var t=Object(v["a"])(regeneratorRuntime.mark(function t(e){var a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,g.a.request({method:"get",url:"https://www.googleapis.com/fitness/v1/users/me/dataSources",headers:{Authorization:"Bearer ".concat(e)}});case 3:return a=t.sent,t.abrupt("return",a);case 7:return t.prev=7,t.t0=t["catch"](0),t.abrupt("return",t.t0);case 10:case"end":return t.stop()}},t,this,[[0,7]])}));return function(e){return t.apply(this,arguments)}}()},x={name:"Login",props:{msg:String},methods:{login:function(){D.login()}}},j=x,O=(a("08f3"),Object(u["a"])(j,f,d,!1,null,"fc77e120",null));O.options.__file="Login.vue";var T=O.exports,C=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("h1",[t._v("Back from authentication")]),a("pre",[t._v(t._s(JSON.stringify(t.result.data,null,2)))])])},R=[],A={name:"Authentication",props:{msg:String},data:function(){return{result:""}},methods:{},created:function(){var t=Object(v["a"])(regeneratorRuntime.mark(function t(){var e,a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e=new URLSearchParams(this.$router.currentRoute.hash),a=e.get("access_token"),this.$router.push({hash:""}),t.next=5,D.validateAccessToken(a);case 5:if(!t.sent){t.next=10;break}localStorage.accessToken=a,this.$router.push("fitnessdata"),t.next=11;break;case 10:this.result="Error logging in to google fitness";case 11:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},M=A,$=(a("eeb0"),Object(u["a"])(M,C,R,!1,null,"621b30c0",null));$.options.__file="Authentication.vue";var q=$.exports,P=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("h1",{staticClass:"title"},[t._v("Browse your fitness data")]),a("div",{staticClass:"field"},[a("label",{staticClass:"label"},[t._v("Data Type")]),a("div",{staticClass:"control"},[a("div",{staticClass:"select"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.selectedDataType,expression:"selectedDataType"}],attrs:{required:""},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.selectedDataType=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:""}},[t._v("Choose data type...")]),t._l(t.getDataTypes(),function(e){return a("option",{key:e},[t._v("\n            "+t._s(e)+"\n          ")])})],2)])])]),a("div",{staticClass:"field"},[a("label",{staticClass:"label"},[t._v("Data Source")]),a("div",{staticClass:"control"},[a("div",{staticClass:"select"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.selectedDataSource,expression:"selectedDataSource"}],attrs:{required:""},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.selectedDataSource=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:""}},[t._v("Choose data source...")]),t._l(t.getDataSources(),function(e){return a("option",{key:e},[t._v("\n            "+t._s(e)+"\n          ")])})],2)])])]),a("hr"),a("aggregated-data",{attrs:{buckets:t.weekData.bucket}})],1)},E=[],V=(a("7f7f"),a("5df3"),a("4f7f"),a("2909")),B="https://www.googleapis.com/fitness/v1/users/me/dataSources",L="https://www.googleapis.com/fitness/v1/users/me/dataset:aggregate",F=864e5,N=6048e5;function I(t){var e=new Date(t);return e.setHours(0),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0),e}var J={getDataSources:function(){var t=Object(v["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,g.a.request({method:"get",url:B,headers:{Authorization:"Bearer ".concat(localStorage.accessToken)}});case 3:return e=t.sent,t.abrupt("return",e.data.dataSource);case 7:return t.prev=7,t.t0=t["catch"](0),t.abrupt("return",t.t0);case 10:case"end":return t.stop()}},t,this,[[0,7]])}));return function(){return t.apply(this,arguments)}}(),getData:function(){var t=Object(v["a"])(regeneratorRuntime.mark(function t(e){var a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,g.a.request({method:"post",url:L,headers:{Authorization:"Bearer ".concat(localStorage.accessToken)},data:{aggregateBy:[{dataSourceId:e}],bucketByTime:{durationMillis:F},startTimeMillis:I(Date.now()-N).getTime(),endTimeMillis:Date.now()}});case 3:return a=t.sent,t.abrupt("return",a.data);case 7:return t.prev=7,t.t0=t["catch"](0),t.abrupt("return",t.t0);case 10:case"end":return t.stop()}},t,this,[[0,7]])}));return function(e){return t.apply(this,arguments)}}()},z=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("h4",{staticClass:"title is-4"},[t._v("Data per day")]),a("table",{staticClass:"table"},[t._m(0),a("tbody",t._l(t.buckets,function(e){return a("tr",{key:e.startTimeMillis},[a("td",[t._v(t._s(t.toDateString(e.startTimeMillis)))]),t._l(t.getValues(e),function(e,n){return a("td",{key:n},[t._v("\n          "+t._s(t.getPrintableValue(e))+"\n        ")])})],2)}))]),a("h5",{staticClass:"title is-5"},[t._v("Raw data")]),a("pre",[t._v(t._s(JSON.stringify(t.buckets,null,2)))])])},U=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("td",[t._v("Date")])])}],H=(a("c5f6"),{name:"AggregratedData",props:{buckets:Array},methods:{getValues:function(t){return t.dataset[0].point.length?t.dataset[0].point[0].value:[]},getPrintableValue:function(t){return t.intVal?t.intVal:t.fpVal?t.fpVal.toFixed(2):t},toDateString:function(t){return new Date(Number(t)).toLocaleDateString("sv-SE")}}}),G=H,K=(a("3896"),Object(u["a"])(G,z,U,!1,null,"04de85c0",null));K.options.__file="AggregatedData.vue";var Q=K.exports,W={name:"FitnessData",components:{AggregatedData:Q},props:{msg:String},data:function(){return{dataSources:"",selectedDataType:"",selectedDataSource:"",weekData:""}},created:function(){var t=Object(v["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,J.getDataSources();case 2:this.dataSources=t.sent;case 3:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),methods:{getDataTypes:function(){if(this.dataSources)return Object(V["a"])(new Set(this.dataSources.map(function(t){return t.dataType.name})))},getDataSources:function(){var t=this;if(this.dataSources)return this.dataSources.filter(function(e){return e.dataType.name===t.selectedDataType}).map(function(t){return t.dataStreamId})}},watch:{selectedDataSource:function(){var t=Object(v["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(this.weekData="Fetching data...",!this.selectedDataSource){t.next=5;break}return t.next=4,J.getData(this.selectedDataSource);case 4:this.weekData=t.sent;case 5:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()}},X=W,Y=(a("83f2"),Object(u["a"])(X,P,E,!1,null,"25fe93a4",null));Y.options.__file="FitnessData.vue";var Z=Y.exports;n["a"].use(r["a"]),n["a"].config.productionTip=!1;var tt=[{path:"/",component:T},{path:"/authenticated",name:"authenticated",component:q},{path:"/fitnessdata",name:"fitnessdata",component:Z}],et=new r["a"]({mode:"history",routes:tt});new n["a"]({render:function(t){return t(p)},router:et}).$mount("#app")},"5c0b":function(t,e,a){"use strict";var n=a("5e27"),r=a.n(n);r.a},"5e27":function(t,e,a){},"83f2":function(t,e,a){"use strict";var n=a("39f2"),r=a.n(n);r.a},8570:function(t,e,a){},eeb0:function(t,e,a){"use strict";var n=a("f63f"),r=a.n(n);r.a},f228:function(t,e,a){t.exports=a.p+"img/fitness-stats-logo.8d3befad.png"},f63f:function(t,e,a){},fc34:function(t,e,a){}});
//# sourceMappingURL=app.2b542055.js.map